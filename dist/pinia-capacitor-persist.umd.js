(function(n,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("@capacitor/preferences")):typeof define=="function"&&define.amd?define(["exports","@capacitor/preferences"],c):(n=typeof globalThis<"u"?globalThis:n||self,c(n.piniaCapacitorPersist={},n.CapacitorPreferences))})(this,function(n,c){"use strict";const l=async e=>c.Preferences.get({key:e}).then(t=>t&&t.value?JSON.parse(t.value):t.value),d=async(e,t)=>c.Preferences.set({key:e,value:JSON.stringify(t)}),o=async()=>c.Preferences.clear(),p=async e=>c.Preferences.remove({key:e}),y=async()=>c.Preferences.keys(),f=async(e,t)=>{const i=e.$id;if(t.include||t.exclude){const s=(t.include?t.include:Object.keys(e.$state).filter(r=>t.exclude.includes(r)===!1)).reduce((r,u)=>(r[u]=e.$state[u],r),{});d(i,s)}else d(i,e.$state)},m=(e,t,i,a)=>new Promise(s=>{l(t).then(r=>{const u=()=>{e.$subscribe(()=>{f(e,i)})};if(r)e.$patch(r),f(e,i).then(()=>(u(),a&&a(e),s()));else return u(),s()})}),P=async({options:e,store:t})=>{var s;if(((s=e.persist)==null?void 0:s.enabled)!==!0)return;const i={include:e.persist.include,exclude:e.persist.exclude},a=t.$id;t.restored=m(t,a,i,e.persist.onRestored)};n.clear=o,n.getKeys=y,n.piniaCapacitorPersist=P,n.removeItem=p,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
